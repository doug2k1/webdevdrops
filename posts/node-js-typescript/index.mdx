---
title: 'Node.js com TypeScript'
date: '2020-05-03'
categories:
  - 'Node.js'
  - 'TypeScript'
tags:
  - 'nodejs'
  - 'typescript'
coverImage: '/node-js-typescript/images/node-typescript.jpg'
translations:
  en: node-js-with-typescript
---

Fala, pessoal! Neste post vou mostrar como voc√™ pode desenvolver no **[Node.js](https://nodejs.org/)** usando **[TypeScript](https://www.typescriptlang.org/)** e ter os [benef√≠cios desta linguagem](https://blog.rocketseat.com.br/typescript-vantagens-mitos-conceitos/) tamb√©m no backend.

## ts-node-dev

Para fazer a transpila√ß√£o do c√≥digo **TypeScript** para **JavaScript**, vamos usar o **[ts-node-dev](https://www.npmjs.com/package/ts-node-dev)**.

Ele fornece um execut√°vel que vamos usar no lugar do **Node** para rodar o c√≥digo TypeScript. Por baixo dos panos ele vai transformar o TypeScript em JavaScript e executar usando o pr√≥prio Node.

Outra coisa legal do ts-node-dev √© que ele substitui o **[nodemon](https://www.npmjs.com/package/nodemon)** tamb√©m, ent√£o sempre que alterarmos algum arquivo .ts ele vai pegar a altera√ß√£o e recarregar a aplica√ß√£o.

## Setup

Vamos precisar do **ts-node-dev** e do pr√≥prio **typescript** como depend√™ncias de desenvolvimento:

```bash
npm i -D ts-node-dev typescript
```

Tamb√©m vamos precisar de um arquivo de configura√ß√µes para o compilador do TypeScript. Podemos gerar uma configura√ß√£o padr√£o com o comando:

```
npx tsc --init
```

Ele vai criar um `tsconfig.json` na raiz da aplica√ß√£o. Voc√™ pode customizar as op√ß√µes, mas o default j√° vai servir pra gente.

## Escrevendo o c√≥digo

Com este setup j√° podemos escrever o c√≥digo da aplica√ß√£o usando arquivos .ts e todas as funcionalidades do TypeScript.

Como exemplo, vamos criar um "Hello World" com **[Express.js](https://expressjs.com/)**.

Vamos precisar instalar o pr√≥prio express, e tamb√©m as defini√ß√µes de tipos para ele. Note que o express √© depend√™ncia da aplica√ß√£o, enquanto as defini√ß√µes de tipos s√£o depend√™ncias de desenvolvimento.

```bash
npm i express
```

```bash
npm i -D @types/express
```

Algumas bibliotecas j√° fornecem as pr√≥prias defini√ß√µes de tipo, ent√£o esta segunda instala√ß√£o n√£o √© necess√°ria. Voc√™ vai descobrir se uma lib precisa quando tentar import√°-la no c√≥digo e o editor reclamar que est√£o faltando as defini√ß√µes de tipo.

Para o nosso "Hello, World" vou escrever este c√≥digo em um arquivo `index.ts`:

```typescript
import express, { json } from 'express'

const app = express()
app.use(json())

app.get('/', (request, response) => {
  return response.json({ message: 'Hello, TypeScript!' })
})

app.listen(3000, () => {
  console.log('üöÄ Server started on http://localhost:3000')
})
```

Veja que podemos usar o padr√£o **[ES Modules](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Statements/import)** (import ... from ...).

## Executando a aplica√ß√£o

Para executar a aplica√ß√£o, vamos adicionar no script de `start`, do `package.json`:

```json
"start": "ts-node-dev --transpile-only index.ts"
```

A op√ß√£o `--transpile-only` vai dizer para ele apenas transpilar, sem fazer verifica√ß√£o de tipos. Esta verifica√ß√£o pode ser feita direto no editor, de forma muito mais √°gil, apontando exatamente no seu c√≥digo onde est√£o os erros.

## Em produ√ß√£o

Em produ√ß√£o, como queremos o m√°ximo de performance, vamos usar diretamente o Node com o c√≥digo transpilado em JavaScript. Para isso podemos adicionar um script de build:

```json
"build": "tsc"
```

Ele vai usar o compilador do TypeScript para transpilar todo o c√≥digo .ts e salvar os .js correspondentes no disco.

## Conclus√£o

O c√≥digo final deste exemplo est√° aqui: [https://github.com/doug2k1/node-typescript](https://github.com/doug2k1/node-typescript)

O TypeScript tem muitas vantagens, e a cada dia a integra√ß√£o com outras ferramentas est√° cada vez madura. Est√° cada vez mais f√°cil adotar, seja no frontend ou backend, e √© uma op√ß√£o cada vez mais interessante para a maioria dos projetos.
